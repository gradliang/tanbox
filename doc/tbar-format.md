# 格式描述
TBA文件，整个文件由四部分组成，分别是：
1. 文件头
2. 字符串表
3. 文件信息表
4. 符号表

其中，符号表是可选的，只有在*.lib文件才会出现。
整个文件里面的多字节整数都是以Little Endian小端排列顺序，涉及到字符串的地方，都使用UTF-8编码。

## 文件头
文件头一共96字节，描述如下：

|字段|大小|描述|
|--	|--	|--	|
|文件标志|3字节|用于标识文件格式,必须是"TBA"|
|格式版本|1字节|必须为数字1|
|文件头校验和|4字节|整个文件的校验和|
|文件总大小|8字节|整个文件的大小|
|文件头总大小|4字节|本文件头的大小|
|文件系统类型|1字节|文件系统类型:<br/>0: 文件系统无关<br/>1: FAT16/FAT32/exFAT<br/>2: Unix UFS<br/>3: Linux EXT2/3/4<br/>4: NTFS<br/>5: ReFS|
|文件类型|1字节|文件类型：<br/>0: 普通TBA打包文件<br/>1: lib文件|
|保留|2字节|必须为0|
|字符串表大小|8字节|字符串表大小，单位字节，必须16字节补齐|
|字符串表偏移|8字节|字符串表在整个文件中的偏移|
|文件成员信息表项数|8字节|文件成员信息表项数 (注意是项数，不是字节大小)|
|文件成员信息表偏移|8字节|文件成员信息表在整个文件中的偏移|
|重要可变信息偏移|8字节|当文件类型为0，可以忽略<br/>当文件类型为1，表示符号信息在整个文件中的偏移|
|重要可变信息大小|8字节|重要可变信息大小，字节占用大小|
|保留|24字节|必须为0|

## 文件成员信息表
文件成员信息表紧跟着文件头，是一个数组，其中每一项占96字节，描述如下：

|字段|大小|描述|
|--	|--	|--	|
|成员文件名|8字节|成员文件名在字符串表中的偏移|
|链接名|8字节|链接名在字符串表中的偏移|
|成员文件大小|8字节|成员文件大小|
|成员文件偏移|8字节|成员文件内容在TBA打包文件的偏移，16字节对齐|
|成员文件修改时间|8字节|64位时间戳|
|uid|4字节|默认为0xFFFFFFFF|
|gid|4字节|默认为0xFFFFFFFF|
|CRC|4字节|成员文件内容的CRC32值|
|mode|2字节|成员文件的权限mode位列表<br/>bit0: 其他用户执行<br/>bit1: 其他用户写<br/>bit2: 其他用户读<br/>bit4: 组执行<br/>bit5: 组写<br/>bit6: 组读<br/>bit8: 用户执行<br/>bit9: 用户写<br/>bit10: 用户读<br/>bit12: sticky位<br/>bit13: 执行时设置GID<br/>bit14: 执行时设置UID|
|属性位|2字节|成员文件的属性位列表<br/>bit0: 只读<br/>bit1: 隐藏<br/>bit2: 存档<br/>bit3: 压缩<br/>bit4: 加密<br/><br/>bit12~bit15:表示文件类型，具体值如下:<br/>(1)值0: 普通文件<br/>(2)值1: 硬链接(指向前一个)<br/>(3)值2: 符号链接<br/>(4)值3: 字符设备节点<br/>(5)值4: 块设备节点<br/>(6)值5: 目录|
|uname|8字节|在字符串表中的偏移，不同文件系统可能有特殊意义|
|gname|8字节|在字符串表中的偏移，不同文件系统可能有特殊意义|
|设备devmajor|4字节|仅用于设备文件|
|设备devminor|4字节|仅用于设备文件|
|保留|16字节|保留，必须为0|

## 文件成员内容
在文件成员信息表后面的，就是各个文件成员的内容。一个一个地紧接着叠加，整齐地放置在一起。

每个成员文件的起始位置必须16字节对齐，成员的大小不足16字节的，在其数据后面用0补齐16字节。

## 符号信息
符号信息防止在文件成员的后面，只有*.lib文件才有。

|字段|大小|描述|
|--	|--	|--	|
|符号个数N|8字节|用于记录符号表中的符号个数|
|索引数组|8xN 字节|用于记录符号存在在哪个文件成员中。索引计数从0开始|
|符号字符串表|*|一系列以NULL结尾的字符串合集，紧凑排列。<br/>下一个字符串紧跟着上一个字符串的NULL字符。<br/>每一个字符串与索引数组一一对应，一共有N个字符串|










